
import unittest

from PresencePoints import PresencePoints

#-------------------------------------------------------------------------------
# class MmxConfigTestCase
#
# python -m unittest discover tests/
#-------------------------------------------------------------------------------
class PresencePointsTestCase(unittest.TestCase):

    #---------------------------------------------------------------------------
    # testInit
    #---------------------------------------------------------------------------
    def testInit(self):
       
        print 'testInit ...'
        
        with self.assertRaises(RuntimeError):
            PresencePoints(None, 'WLBG')

        with self.assertRaises(RuntimeError):
            PresencePoints('does/not/exist/config.mmx', 'WLBG')

        with self.assertRaises(RuntimeError):
            PresencePoints('tests', 'WLBG')

        with self.assertRaises(RuntimeError):
            PresencePoints('MmxConfig.py', 'WLBG')

        with self.assertRaises(RuntimeError):
            PresencePoints('tests/WLBG-geog-No-EPSG.csv', 'WLBG')

        validFile = 'tests/WLBG-geog.csv'
        pp = PresencePoints(validFile, 'WLBG')
        self.assertEqual(pp.epsg, '4326')

        expected = [('-76.8671666660681', '39.3436944431431'), ('-76.8664444398563', '39.3471388918811'), ('-76.8694166689547', '39.3383611102732'), ('-76.8671666695951', '39.3392777827194'), ('-76.8865833366437', '39.4182777756425'), ('-76.8659722184682', '39.344722224643'), ('-76.8691944488765', '39.3399444455812'), ('-76.8663055596963', '39.3391388894128'), ('-76.8663055596963', '39.3391388894128'), ('-76.8663055521275', '39.3397222253368'), ('-76.8663055521275', '39.3397222253368'), ('-76.8707222209104', '39.3381111142888'), ('-76.8679444446946', '39.3394722199437'), ('-76.8736388880354', '39.4048611101923'), ('-76.8579444453814', '39.3857222223938'), ('-76.8860277806383', '39.4183888945753'), ('-76.8855833385638', '39.4299444414815'), ('-76.8933333297525', '39.3845000019155'), ('-76.8791666640668', '39.3476666637891'), ('-76.864583336539', '39.4117777778655'), ('-76.864583336539', '39.4117777778655'), ('-76.8666666611249', '39.4003333333458'), ('-76.8861666627378', '39.4285277772245'), ('-76.8870833293576', '39.4318055576307'), ('-76.8782222167803', '39.3475833371506'), ('-76.8856944424911', '39.4271666672142'), ('-76.8856944424911', '39.4271666672142'), ('-76.8891944453535', '39.4326111107889'), ('-76.8656388859388', '39.4106111111514')]
        self.assertEqual(expected, pp.points)
